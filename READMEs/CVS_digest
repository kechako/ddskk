-*- outline -*-

             $Date: 2001/02/03 00:22:59 $
	     $Id: CVS_digest,v 1.7 2001/02/03 00:22:59 minakaji Exp $

[CVS ダイジェスト]

* cvs repository tree

     $CVSROOT(openlab.ring.gr.jp:/circus/cvsroot)
        |
        |
        +-- skk --+-- main (Main distribution -- Emacs Lisp, tutorials, etc)
                  |
                  |
                  +-- dic (Dictionaries)
                  |
                  |
                  +-- tools (Dictionary maintenance tools)
                  |
                  |
                  +-- pySKK (SKK related libraries using python)
                  |
                  |
                  +-- web (Web page html files)

* cvs main trunk/branch history map

                                  +---------+    +---------+
                 legacy branch    | 10.62.2 |----| 10.62.x |
                                / +---------+    +---------+
                               /
                              /
+----------------+    +------------------+    +---------------+    +-----+    +-----+
|10.62 (skk10_62)|----|10.62a (skk10_62a)|----| 11.3 (Sakurai)|----|11.4 |----|11.x |  <- The main trunk
+----------------+    +------------------+    +---------------+    +-----+    +-----+     (daredevil skk)
                                                     /
                                                    /
                                                   /
                                    +-----+    +-----+    +-----+
                daredevil branch    |11.1 |----|11.2 |----|11.x |
                                    +-----+    +-----+    +-----+
* cvs の入手方法

CVS は 以下のサイトで配布されています。

ftp://ftp.cvshome.org/pub/

現時点での最新版は cvs-1.11 です。

また、少し更新が遅れ気味のようですが、 GNU のミラーサイトからも入手で
きます。マスターサイトは

ftp://ftp.gnu.org/gnu/non-gnu/cvs/

ですが、日本から入手する場合は

ftp://ftp.ring.gr.jp/pub/GNU/non-gnu/cvs/
ftp://ftp.win.ne.jp/pub/GNU/non-gnu/cvs/
ftp://ftp.iij.ad.jp/pub/GNU/non-gnu/cvs/
ftp://ftp.tokyonet.ad.jp/pub/GNU/non-gnu/cvs/

等の日本のサイトを利用すればいいでしょう。

上記は安定した正式リリース版ですが、最新の開発版を利用したい人は

http://www.cvshome.org/dev/source.html

をご覧ください。

Windows で CVS を利用し開発に参加される方は、cygwin 環境を利用して下さ
い。詳細については CVS_on_Windows をご覧下さい。

cvs に関する情報は cvs のホームページ

http://www.loria.fr/~molli/cvs-index.html

および

http://www.cvshome.org

から入手可能です。

また、CVS に関する日本語の情報として、以下のようなページがあります。

http://duff.kuicr.kyoto-u.ac.jp/~okuji/gnujdoc.html
http://www-vox.dj.kit.ac.jp/nishi/cvs/
http://www.itojun.org/hack/cvs/tut-kernel.html
http://www.race.u-tokyo.ac.jp/~moro/cvs/

なお、Emacs の CVS インターフェイスである pcl-cvs が以下のサイトから入
手できます。

ftp://rum.cs.yale.edu/pub/monnier/pcl-cvs

なお、pcl-cvs には elib の他、pcl-cvs バージョン 2.9.6 以降では、
easy-mmode.el が必要となります。お使いになっている Emacs にこれが付い
ていない場合は、同所から入手しましょう。

* cvs サーバからの SKK ソースの入手

** Login

まず、guest アカウントで openlab.ring.gr.jp の cvs server にログインし
ます (openlab.ring.gr.jp の cvs server 用に個人のアカウントを持ってらっ
しゃる方は、それを使いましょう)。

     $ cvs -d :pserver:guest@openlab.ring.gr.jp:/circus/cvsroot login

パスワードの入力を促すプロンプトが出るので、パスワードとして `guest'
を入れ、CR しましょう。

     CVS password: guest (CR)

~/.cvspass というファイルに password が記録され、次からは明示的な
login は不要になります (*注1)。

** Checkout

Checkout して cvs server からソースをもらってきます (このファイルをワー
キングコピーといいます) (*注2)。Maintrunk (Daredevil SKK-11.x) を入手
したければ、下記のようにします

     $ cvs -d :pserver:guest@openlab.ring.gr.jp:/circus/cvsroot checkout skk/main

Legacy branch (maintenance version of SKK-10.x) を入手したければ、下記
のようにします。

     $ cvs -d :pserver:guest@openlab.ring.gr.jp:/circus/cvsroot checkout -r legacy skk/main

カレントディレクトリの下にできる skk/main というディレクトリにワーキン
グコピーがコピーされます。

     $ cd skk/main

コンパイルして使うなり、編集するなりご自由にどうぞ (但し編集結果を
server のソースに反映するにはご自分専用の account が必要です。cvs
account の発行を参照)。

** Update

ワーキングコピーは残しておくと、cvs server 上のソースに変更が加えられ
たときに差分だけ取り寄せ、ワーキングコピーを最新の状態にすることができ
ます。

ワーキングコピーは、openlab.ring.gr.jp:/circus/cvsroot を指しているこ
とを記憶している (*注3) ので、update から始めると、自動的にログインで
きます。

   $ cvs update -dP

update の -d オプションは repoitory 上に存在しているのに、手元の
working copy 上にないディレクトリがあれば追加し、-P オプションは逆に
repositry 上に存在しないディレクトリを working copy から消し去ります。
.cvsrc ファイルに

     update -dP

と書いておき、常にこれらのオプションを付けることをお勧めします。

* 手元のソースを変更して cvs server にあるソースに変更を反映する (commit, tag)

** cvs account の発行

openlab.ring.gr.jp の cvs server 上にアカウントがないと commit, tag で
きません。owner-skk@ring.gr.jp 宛てに希望するアカウント名 (*注4) と、
crypt されたパスワード文字列を連絡して下さい (*注5)。

登録が完了したらご連絡申し上げます。

** Login

まず、openlab.ring.gr.jp の cvs server にログインします。

     $ cvs -d :pserver:your_account@openlab.ring.gr.jp:/circus/cvsroot login

登録されたパスワードを入力して下さい。

     CVS password: XXXX (CR)

次からは login 手続きは要りません。
 

** Checkout/Update

前述の guest アカウントによる checkout/update と手続き的には同じです。


** Commit

下記の手順を踏んで commit して下さいね。

(a)まずワーキングコピーのソースを自分の環境でコンパイル & インストール
   します。

(b)自分が普段使っている環境で動作確認をして下さい。(少なくとも一度、
   SKK を起動 & 終了して問題がないことを確認してね)。 

(c)ML skk@ring.gr.jp に投稿するためのリリースノートを書いて下さい (主
   な変更点が分る程度の簡単なもので結構です) 。この際、必ず上記でイン
   ストールした新たなワーキングコピーからコンパイルした SKK を使用して
   書いて下さい。 

(d)リリースノートの記事を書いている間中も SKK に問題がなければ、ワーキ
   グコピーを commit して上記リリースノートを ML skk@ring.gr.jp に投稿
   して下さい。

(e)ChangeLog の更新をお忘れなく (英語で書いていますが、英語が苦痛なら
   日本語で書いても全然問題ありません) (*注6) 。

     $ cd skk/main
     $ cvs commit -m "あなたのコメントをここに。" ChangeLog
     $ cvs commit -m "あなたのコメントをここに。" skk.el


** guest で入手したワーキングコピーを自分の account を使って commit する方法

cvs のオプションに

   `-d :pserver:your_account@openlab.ring.gr.jp:/circus/cvsroot'

を指定して commit することで、強制的に your_account での commit を行なうことができます。

** Tag

Daredevil SKK, legacy branch ともに Openlab でバージョンが振られたアー
カイブが公開される度に tag 付けします。daredevil の tag 付けルールは、
Codename というファイルの中身を参照して下さい (但し、tag には空白文字
を含めることができないようなので、tag 付けするのは、Codename のうち、
駅名の部分だけです)。

     $ cvs tag (Codename) .

legacy branch はtag は skk10_62, skk10_63, skk10_64... というふうに付けます。

* 脚注

** 注1

ワーキングコピーは、openlab.ring.gr.jp:/circus/cvsroot を指しているこ
とを記憶している (*注3) ので、ワーキングコピーを置いているディレクトリ
で checkout, update, commit, tag などの cvs コマンドを実行すると、自動
的に openlab.ring.gr.jp にログインして、それぞれのコマンドを実行します。

** 注2

~/.cvsrc に、

     cvs -z3

と書いておくと、cvs server との通信内容が圧縮されます。z オプションの
数字が大きい程圧縮率が高いのですが、圧縮率が高い程サーバの負担が高いの
で、3 ぐらいが丁度良いようです。

** 注3

ワーキングコピーのあるディレクトリ (及びそのサブディレクトリ) の
CVS/Root というファイルにサーバ情報が保存されています。

** 注4

既存のアカウント名と重複する場合は発行できませんので、2, 3 の候補を上
げていただけると助かります。

** 注5

crypt されたパスワード文字列を生成するには、いくつかの方法があります
(但し、openlab.ring.gr.jp の crypt() が DES based なため、貴殿のシステ
ムライブラリーの crypt() が DES base な場合に限り利用できます)。

(a)/etc/passwd から直接取り出す 。

(b)perl, python, ruby などの interpreter 系のコマンドを使うことによっても生成できます。

   % perl -e 'print crypt("PASSWORD", "SALT"), "\n";'

   % python -c 'import crypt; print crypt.crypt("PASSWORD", "SALT");'

   % ruby -e 'print "PASSWORD".crypt("SALT"), "\n";'

   (*) 上記の "SALT" の部分は、集合 [a-zA-Z0-9./] から 2 文字の文字列
       を任意に選んで指定します。この文字列はアルゴリズムの出力を 4096
       通りにかき乱すのに、また encrypt して出力される文字列の先頭 2
       文字として使われます。

(c)crypt() 関数を使う他のコマンドを利用する (Debian GNU/Linux の
   mkpasswd や makepasswd など)。

(d)上記の方法のいずれも利用できない方は、素のパスワードを送って下さっ
   ても結構です。
 
** 注6

Emacs の cvs front end、pcl-cvs を使うと、commit のために C キー
(`cvs-mode-changelog-commit') を押すと ChangeLog から、当日 commiter
自身が書いた部分を抜き出して、log を書く手助けをしてくれます。

[end of CVS_digest]
